var app=angular.module("app",[]);app.service("transactionsService",["$http","$q",function(t,n){this.service=function(e,i,a){var r=n.defer();return setTimeout(function(){t({method:e,url:"http://localhost:3000/"+i,data:a}).then(function(t){r.resolve(t.data)},function(t){r.reject(t.statusText)})},100),r.promise}}]),app.directive("transactionsAdd",function(){return{restrict:"E",replace:!0,templateUrl:"app/components/transactions/add/view.html",require:"?transactionsTable",link:function(t,n,e,i){}}}),app.directive("transactionsSearch",function(){return{restrict:"E",replace:!0,templateUrl:"app/components/transactions/search/view.html",require:"?transactionsTable",link:function(t,n,e,i){}}}),app.directive("transactionsTable",function(){return{restrict:"E",replace:!0,templateUrl:"app/components/transactions/table/view.html",controller:function(t,n,e){function i(i,a,r){var c=e.defer();return n.service(i,a,r).then(function(){n.service("GET","transactions").then(function(n){t.transactions=n,c.resolve(!0)})}),c.promise}t.loading=!0,n.service("GET","categories").then(function(n){t.categories=n}),n.service("GET","status").then(function(n){t.status=n}),n.service("GET","accounts").then(function(n){t.accounts=n}),n.service("GET","transactions").then(function(n){t.headers=["ID","Date","Description","Account","Category","Amount","Balance","Status"],t.transactions=n,t.loading=!1}),this.add=function(t){return i("POST","transactions/"+t,t)},this["delete"]=function(t){return i("DELETE","transactions/"+t.id,t)},this.edit=function(t){return i("PUT","transactions/"+t.id,t)}},link:function(t,n,e){}}}),app.directive("transactionsEdit",function(){return{restrict:"A",require:"^transactionsTable",scope:!0,link:function(t,n,e,i){var a=$(n).find(".transaction-data"),r=$(n).find(".transaction-edit-trigger"),c=$(n).find(".transaction-edit"),o=$(n).find(".transaction-sync"),s=!1;r.hide(),c.hide(),o.hide(),$(n).bind("mouseover",function(){s||r.fadeIn()}),$(n).bind("mouseleave",function(){s||r.fadeOut()}),$(r).bind("click",function(){a.fadeOut().promise().done(function(){s=!0,c.fadeIn(),r.hide()})}),t.save=function(t,n){n&&n.preventDefault(),c.fadeOut().promise().done(function(){o.fadeIn().promise().done(function(){i.edit(t).then(function(){o.fadeOut().promise().done(function(){a.fadeIn(500).promise().done(function(){s=!1,r.show()})})})})})}}}});