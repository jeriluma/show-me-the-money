var app=angular.module("app",[]);app.service("transactionsService",["$http","$q",function(t,n){this.service=function(e,i,a){var c=n.defer();return t({method:e,url:"http://localhost:3000/"+i,data:a}).then(function(t){c.resolve(t.data)},function(t){c.reject(t.statusText)}),c.promise}}]),app.directive("transactionsEdit",function(){return{restrict:"A",require:"^transactionsTable",link:function(t,n,e,i){var a=$(n).find(".transaction-edit-hover"),c=$(n).find(".transaction-editing"),r=!1;a.hide(),c.hide(),$(n).bind("mouseover",function(){r||a.fadeIn()}),$(n).bind("mouseleave",function(){r||a.fadeOut()}),$(a).bind("click",function(){$(n).children().hide(),r=!0,c.fadeIn()}),t.save=function(t,n){n&&n.preventDefault(),i.edit(t)},t.$watch(i.transacting,function(){i.transacting?r=!1:c.fadeOut()})}}}),app.directive("transactionsAdd",function(){return{restrict:"E",replace:!0,templateUrl:"app/components/transactions/add/view.html",require:"?transactionsTable",link:function(t,n,e,i){}}}),app.directive("transactionsSearch",function(){return{restrict:"E",replace:!0,templateUrl:"app/components/transactions/search/view.html",require:"?transactionsTable",link:function(t,n,e,i){}}}),app.directive("transactionsTable",function(){return{restrict:"E",replace:!0,templateUrl:"app/components/transactions/table/view.html",controller:function(t,n,e){n.service("GET","categories").then(function(n){t.categories=n}),n.service("GET","status").then(function(n){t.status=n}),n.service("GET","accounts").then(function(n){t.accounts=n}),n.service("GET","transactions").then(function(n){t.headers=["ID","Date","Description","Account","Category","Amount","Balance","Status"],t.transactions=n}),t.addTransaction=function(t){n.service("POST","transactions",t).then(getTransactions())},t.deleteTransaction=function(t){n.service("DELETE","transactions/"+t.id).then(getTransactions())},this.transacting=!1,this.edit=function(e){this.gettingTransaction=!0,n.service("PUT","transactions/"+e.id,e).then(function(e){n.service("GET","transactions").then(function(n){t.transactions=n,this.transacting=!1})})}},link:function(t,n,e){}}});